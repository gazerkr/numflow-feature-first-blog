# 셀프 호스팅 블로그 시스템 - 개요

## 프로젝트 소개

Numflow + EJS + Prisma + SQLite 기반의 셀프 호스팅 블로그 시스템입니다.
Feature-First 아키텍처를 사용하여 모듈식 구조로 설계되었습니다.

## 핵심 목표

1. **간편한 설치 프로세스**
   - 최초 접속 시 자동 설치 감지
   - 간단한 설정만으로 블로그 시작
   - 데이터베이스 자동 마이그레이션

2. **관리자 기능**
   - 안전한 관리자 계정 생성
   - 블로그 글 작성/수정/삭제
   - 블로그 설정 관리

3. **현대적인 블로그 기능**
   - 마크다운 지원
   - Slug 기반 URL
   - 공개/비공개 글 관리
   - 카테고리/태그 시스템

## 기술 스택

- **프레임워크**: Numflow (Express 5.x 호환)
- **템플릿 엔진**: EJS
- **ORM**: Prisma
- **데이터베이스**: SQLite (셀프 호스팅에 최적)
- **인증**: bcrypt + express-session
- **아키텍처**: Feature-First

## 주요 특징

### 1. 셀프 호스팅 시스템
- 별도의 서버 설정 불필요
- SQLite 사용으로 간편한 배포
- 파일 기반 데이터베이스로 쉬운 백업

### 2. Feature-First 아키텍처
```
features/
  install/          # 설치 기능
  auth/            # 인증 기능
  admin/           # 관리자 기능
  blog/            # 블로그 기능
```

### 3. UUID 기반 보안
- 모든 ID에 UUID 사용
- 예측 불가능한 URL
- 보안 강화

## 사용자 플로우

### 초기 설치
```
1. 사이트 접속
   ↓
2. 설치 상태 확인 (미들웨어)
   ↓
3. 미설치 시 → /install로 리다이렉트
   ↓
4. 설치 프로세스:
   - 블로그 정보 입력
   - 관리자 계정 생성
   - 기본 설정
   ↓
5. 설치 완료 → 메인 페이지
```

### 일반 사용
```
1. 메인 페이지 (글 목록)
   ↓
2. 글 상세 보기
   ↓
3. 카테고리별 보기
```

### 관리자 사용
```
1. 로그인 (/admin/login)
   ↓
2. 관리자 대시보드
   ↓
3. 글 작성/수정/삭제
   ↓
4. 설정 관리
```

## 보안 고려사항

1. **비밀번호 암호화**
   - bcrypt 사용 (salt rounds: 10)

2. **세션 관리**
   - express-session 사용
   - 안전한 쿠키 설정

3. **CSRF 방지**
   - POST 요청에 대한 토큰 검증

4. **XSS 방지**
   - EJS 자동 이스케이핑
   - 마크다운 새니타이제이션

## 디렉토리 구조

```
sqlite-feature-blog/
├── docs/                    # 설계 문서
├── features/                # Feature-First 구조
│   ├── install/            # 설치 기능
│   ├── auth/               # 인증 기능
│   ├── admin/              # 관리자 기능
│   └── blog/               # 블로그 기능
├── lib/                    # 공통 라이브러리
│   ├── prisma.js           # Prisma Client
│   ├── auth.js             # 인증 헬퍼
│   └── middleware.js       # 공통 미들웨어
├── views/                  # EJS 템플릿
│   ├── layouts/            # 레이아웃
│   ├── install/            # 설치 화면
│   ├── admin/              # 관리자 화면
│   └── blog/               # 블로그 화면
├── public/                 # 정적 파일
├── prisma/                 # Prisma 설정
│   ├── schema.prisma       # 스키마 정의
│   ├── migrations/         # 마이그레이션
│   └── seed.js             # 시드 데이터
└── app.js                  # 애플리케이션 진입점
```

## 다음 단계

1. 데이터베이스 스키마 설계
2. 기능 명세
3. 상세 Feature-First 구조 설계
4. 인증/인가 시스템 설계
5. 구현 로드맵
